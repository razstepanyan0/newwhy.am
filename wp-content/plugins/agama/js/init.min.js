!function(a){"use strict";a(document).ready(function(){a("#palleon").palleon({enableGLFiltering:"true"===palleonParams.enableGLFiltering,textureSize:palleonParams.textureSize,version:palleonParams.version,watermark:"none",customFunctions:function(e,t,i,n){function r(a){for(var e=a.split(","),t=e[0].match(/:(.*?);/)[1],i=atob(e[1]),n=i.length,r=new Uint8Array(n);n--;)r[n]=i.charCodeAt(n);return new Blob([r],{type:t})}function o(){var e=!0,i=t.getObjects().filter(a=>"printarea"!=a.objectType);if(0!==i.length){var n=t.getObjects().filter(a=>"printarea"==a.objectType)[0];n&&a.each(i,function(a,t){if(!t.isContainedWithinObject(n)&&"clipPath"!=t.objectType)return e=!1,!1})}return e}function l(){if("undefined"!=typeof agamaVariations){var t=!1,i={};a("#palleon-adjust").find(".palleon-control").each(function(){var e=a(this).find(":first"),t=e.attr("id"),n="";e.hasClass("agama-swatches")?(n=e.find(".selected").attr("data-value"),i["attribute_"+t]=n):e.hasClass("agama-attribute")&&(n=e.val(),i["attribute_"+t]=n)}),a.each(agamaVariations,function(a,n){if(JSON.stringify(n.attributes)===JSON.stringify(i)&&n.is_in_stock){var r="";return n.availability_html&&""!=n.availability_html&&(r=n.availability_html),e.find(".product_meta .sku").html(n.sku),t=!0,""!=r&&e.find("#agama-product-price-notice").html(r),e.find("#agama-product-price").html(n.price_html),e.find("#agama-add-to-cart").attr("data-variation",n.variation_id),e.find("#agama-add-to-cart").attr("data-price",n.display_price),""!=n.max_qty&&(e.find("#agama-quantity").data("max",n.max_qty),e.find("#agama-quantity").val()>n.max_qty&&e.find("#agama-quantity").val(n.max_qty)),!1}}),!1===t?(e.find(".product_meta .sku").html("N/A"),e.find("#agama-product-price").html('<div class="notice notice-danger">'+agamaParams.outofstock+"</div>"),e.find("#agama-additional-fee").hide(),e.find("#agama-product-price-notice").hide(),e.find("#agama-product-price-total").hide(),e.find("#agama-product-price").addClass("outofstock"),e.find("#agama-quantity-control").hide()):(e.find("#agama-additional-fee").show(),e.find("#agama-product-price-notice").show(),e.find("#agama-product-price-total").show(),e.find("#agama-product-price").removeClass("outofstock"),e.find("#agama-quantity-control").show(),d())}}function s(a){for(var e=(a+="").split("."),t=e[0],i=e.length>1?"."+e[1]:"",n=/(\d+)(\d{3})/;n.test(t);)t=t.replace(n,"$1"+agamaParams.thousandSeparator+"$2");return t+i}function d(){var t=0,i=parseInt(e.find("#agama-add-to-cart").attr("data-price"));if(e.find("#agama-print-areas .palleon-btn").each(function(){"0"!==a(this).attr("data-val")&&(t+=parseFloat(a(this).attr("data-val")))}),0!==t){var n=t.toFixed(parseInt(agamaParams.numberOfDecimals)).replace(".",agamaParams.decimalSeparator);"left"==agamaParams.currencyPosition?e.find("#agama-additional-fee").html(" + "+agamaParams.currencySymbol+s(n)):"right"==agamaParams.currencyPosition?e.find("#agama-additional-fee").html(" + "+s(n)+agamaParams.currencySymbol):"left_space"==agamaParams.currencyPosition?e.find("#agama-additional-fee").html(" + "+agamaParams.currencySymbol+" "+s(n)):"right_space"==agamaParams.currencyPosition&&e.find("#agama-additional-fee").html(" + "+s(n)+" "+agamaParams.currencySymbol);var r=parseFloat(i+t).toFixed(parseInt(agamaParams.numberOfDecimals)).replace(".",agamaParams.decimalSeparator);"left"==agamaParams.currencyPosition?e.find("#agama-product-price-total").html("Total: "+agamaParams.currencySymbol+s(r)):"right"==agamaParams.currencyPosition?e.find("#agama-product-price-total").html("Total: "+s(r)+agamaParams.currencySymbol):"left_space"==agamaParams.currencyPosition?e.find("#agama-product-price-total").html("Total: "+agamaParams.currencySymbol+" "+s(r)):"right_space"==agamaParams.currencyPosition&&e.find("#agama-product-price-total").html("Total: "+s(r)+" "+agamaParams.currencySymbol)}else e.find("#agama-additional-fee").html(""),e.find("#agama-product-price-total").html("");e.find("#agama-additional-fee").attr("data-fee",t)}t.on("object:modified",function(e){var i=e.target,n=t.getObjects().filter(a=>"printarea"==a.objectType)[0];n&&(i.isContainedWithinObject(n)?(a("#palleon-layers").find("#"+i.id+" > .material-icons:first-child").css("visibility","visible"),a("#palleon-layers").find("#"+i.id).attr("title",""),a("#palleon-layers").find("#"+i.id).removeClass("not-inside"),a("#palleon-layers").find("#"+i.id+" > .warning").remove()):(a("#palleon-layers").find("#"+i.id+" > .material-icons:first-child").css("visibility","hidden"),a("#palleon-layers").find("#"+i.id).attr("title",agamaParams.outside),a("#palleon-layers").find("#"+i.id).addClass("not-inside"),a("#palleon-layers").find("#"+i.id+" > .warning").remove(),a("#palleon-layers").find("#"+i.id).append('<span class="material-icons warning">warning</span>')))}),t.on("selection:cleared",function(){var e=t.getObjects().filter(a=>"printarea"!=a.objectType),i=t.getObjects().filter(a=>"printarea"==a.objectType)[0];0!==e.length&&a.each(e,function(e,t){t.isContainedWithinObject(i)?(a("#palleon-layers").find("#"+t.id+" > .material-icons:first-child").css("visibility","visible"),a("#palleon-layers").find("#"+t.id).attr("title",""),a("#palleon-layers").find("#"+t.id).removeClass("not-inside"),a("#palleon-layers").find("#"+t.id+" > .warning").remove()):(a("#palleon-layers").find("#"+t.id+" > .material-icons:first-child").css("visibility","hidden"),a("#palleon-layers").find("#"+t.id).attr("title",agamaParams.outside),a("#palleon-layers").find("#"+t.id).addClass("not-inside"),a("#palleon-layers").find("#"+t.id+" > .warning").remove(),a("#palleon-layers").find("#"+t.id).append('<span class="material-icons warning">warning</span>'))})}),e.find("#agama-printarea-color").bind("change",function(){var e=a(this).val(),i=t.getObjects().filter(a=>"printarea"==a.objectType)[0];i&&(i.set("fill",e),t.requestRenderAll())}),e.find("#agama-bg-img-upload").on("change",function(i){if(""!=a(this).val()){if(a(this).data("max")&&""!=a(this).data("max")&&this.files[0].size>parseInt(a(this).data("max")))return n.error(palleonParams.maxUploadSize+" "+parseInt(a(this).data("max"))/1048576+"MB.",palleonParams.error),void(this.value="");e.find("#agama-bg-delete").trigger("click");var r=new FileReader;r.onload=function(a){var i,n,r,o=new Image;i=a.target.result,n=function(a){o.src=a;var i=t.getObjects().filter(a=>"printarea"==a.objectType)[0];i&&(o.onload=function(){var a=new fabric.Image(o);a.scaleToWidth(i.width/2);var n=new fabric.StaticCanvas;n.setDimensions({width:a.getScaledWidth(),height:a.getScaledHeight()}),n.add(a),n.renderAll();var r=new fabric.Pattern({source:n.getElement(),repeat:"repeat",offsetX:0,offsetY:0,angle:0});i.clone(function(a){a.set({id:(new Date).getTime(),objectType:"clipPath",objectCaching:!1,fill:r,selectable:!1,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,erasable:!1,stroke:"transparent",strokeWidth:0}),t.add(a),t.sendToBack(a),t.sendToBack(i)}),e.find("#agama-bg-width").val(Math.round(parseInt(a.getScaledWidth()))),e.find("#agama-bg-width").attr("min",Math.round(parseInt(a.getScaledWidth())/4)),e.find("#agama-bg-width").attr("max",Math.round(4*parseInt(a.getScaledWidth()))),e.find("#agama-bg-offset-x").val(0),e.find("#agama-bg-offset-x").attr("max",Math.round(4*parseInt(a.getScaledWidth()))),e.find("#agama-bg-offset-y").val(0),e.find("#agama-bg-offset-y").attr("max",Math.round(4*parseInt(a.getScaledHeight()))),e.find("#agama-bg-width").trigger("input"),e.find("#agama-bg-offset-x").trigger("input"),e.find("#agama-bg-offset-y").trigger("input"),e.find("#agama-bg-image-settings").show(),e.find("#agama-bg-delete").show(),document.getElementById("agama-bg-width").oninput=function(){a.scaleToWidth(parseInt(this.value,10)),n.setDimensions({width:a.getScaledWidth(),height:a.getScaledHeight()}),t.requestRenderAll()},document.getElementById("agama-bg-offset-x").oninput=function(){r.offsetX=parseInt(this.value,10),t.requestRenderAll()},document.getElementById("agama-bg-offset-y").oninput=function(){r.offsetY=parseInt(this.value,10),t.requestRenderAll()},setTimeout(function(){t.requestRenderAll(),e.find("#palleon-canvas-loader").hide()},500)})},(r=new XMLHttpRequest).onload=function(){var a=new FileReader;a.onloadend=function(){n(a.result)},a.readAsDataURL(r.response)},r.open("GET",i),r.responseType="blob",r.send()},r.readAsDataURL(i.target.files[0]),t.fire("palleon:history",{type:"image",text:palleonParams.added})}}),e.find("#agama-bg-delete").on("click",function(){var i=t.getObjects().filter(a=>"clipPath"==a.objectType)[0];i&&(a(this).hide(),e.find("#agama-bg-image-settings").hide(),t.remove(i),t.requestRenderAll())}),e.find(".agama-lightbox").featherlightGallery({previousIcon:"arrow_back_ios_new",nextIcon:"arrow_forward_ios",closeIcon:"close",galleryFadeIn:100,galleryFadeOut:300}),e.on("click",".agama-swatch",function(e){var i=a(this),n=i.closest(".value").find("select"),r=i.data("value"),o=i.data("color");i.addClass("selected").siblings(".selected").removeClass("selected"),n.val(r),n.change(),t.backgroundColor=o,t.requestRenderAll(),l()}),e.find("#palleon-adjust select.agama-attribute").change(function(){l()}),e.find("#agama-templates-tag").on("change",function(){var t=a(this).val();""==t?e.find("#agama-templates .agama-templates-item").show():(e.find("#agama-templates .agama-templates-item").hide(),e.find("#agama-templates .agama-templates-item").each(function(e,i){-1!==a.inArray(parseInt(t),a(this).data("category"))&&a(this).show()}))}),e.find("#agama-templates").on("click",".agama-templates-item",function(){var i=a(this).attr("data-json");e.find("#palleon-canvas-loader").css("display","flex"),t.getObjects().filter(a=>"printarea"!=a.objectType).forEach(a=>t.remove(a)),e.find("#palleon-layers > li:not(.layer-printarea)").remove(),a.getJSON(i,function(e){for(var i=0;i<e.objects.length;i++)"textbox"==e.objects[i].objectType&&(e.objects[i].fontFamily=e.objects[i].fontFamily+"-palleon",e.objects[i].realFontSize=e.objects[i].fontSize,e.objects[i].fontSize=1);fabric.util.enlivenObjects(e.objects,function(e){var i=t.renderOnAddRemove;t.renderOnAddRemove=!1;var n=e.filter(a=>"textbox"==a.objectType);a(document).trigger("loadTemplateFonts",[n]),e.forEach(function(a){t.add(a)});var r=t.getObjects().filter(a=>"printarea"!=a.objectType),o=t.getObjects().filter(a=>"printarea"==a.objectType)[0],l=new fabric.ActiveSelection(r,{canvas:t});t.setActiveObject(l);var s=t.getActiveObject();s.scaleToWidth(.9*o.width*t.getZoom()),s.getScaledHeight()>=o.height*t.getZoom()&&s.scaleToHeight(.5*o.height*t.getZoom()),s.set("originX","left"),s.set("originY","top"),s.set("top",o.top-o.height/2+(o.getScaledHeight()-s.getScaledHeight())/2),s.set("left",o.left-o.width/2+(o.getScaledWidth()-s.getScaledWidth())/2),t.discardActiveObject(),t.renderOnAddRemove=i,t.requestRenderAll()})}).fail(function(a,e,t){n.error("Request Failed: "+t,palleonParams.error)}).always(function(){e.find("#palleon-canvas-loader").hide()})}),e.find("#agama-upload-template").on("change",function(i){e.find("#palleon-canvas-loader").css("display","flex"),e.find("#agama-bg-delete, #agama-bg-image-settings").hide();var n=new FileReader,r="";n.onload=function(i){var o=(r=JSON.parse(n.result)).backgroundColor;t.getObjects().filter(a=>"printarea"!=a.objectType).forEach(a=>t.remove(a)),e.find("#palleon-layers > li:not(.layer-printarea)").remove();for(var l=0;l<r.objects.length;l++)"textbox"==r.objects[l].objectType&&(r.objects[l].fontFamily=r.objects[l].fontFamily+"-palleon",r.objects[l].realFontSize=r.objects[l].fontSize,r.objects[l].fontSize=1);fabric.util.enlivenObjects(r.objects,function(i){var n=t.renderOnAddRemove;t.renderOnAddRemove=!1;var r=i.filter(a=>"textbox"==a.objectType);a(document).trigger("loadTemplateFonts",[r]),i.forEach(function(a){t.add(a)});var l=t.getObjects().filter(a=>"printarea"!=a.objectType),s=t.getObjects().filter(a=>"printarea"==a.objectType)[0];s.set("fill",o),e.find("#agama-printarea-color").spectrum("set",o);var d=new fabric.ActiveSelection(l,{canvas:t});t.setActiveObject(d);var c=t.getActiveObject();c.scaleToWidth(.9*s.width*t.getZoom()),c.getScaledHeight()>=s.height*t.getZoom()&&c.scaleToHeight(.5*s.height*t.getZoom()),c.set("originX","left"),c.set("originY","top"),c.set("top",s.top-s.height/2+(s.getScaledHeight()-c.getScaledHeight())/2),c.set("left",s.left-s.width/2+(s.getScaledWidth()-c.getScaledWidth())/2),t.discardActiveObject(),t.renderOnAddRemove=n,t.requestRenderAll(),e.find("#palleon-canvas-loader").hide()})},n.readAsText(i.target.files[0])}),e.find("#agama-download-template").on("click",function(){var i=e.find(".agama-product-title").attr("data-slug");t.clone(function(e){if(0!==e.getObjects().filter(a=>"printarea"!=a.objectType).length){var t="",l=e.getObjects().filter(a=>"printarea"==a.objectType)[0];if(l){var s=l.fill;if(!o())return n.error(agamaParams.outside,palleonParams.error),!1;e.discardActiveObject(),l.set("strokeWidth",0);var d=new fabric.ActiveSelection(e.getObjects().filter(a=>"clipPath"!=a.objectType),{canvas:e});e.setActiveObject(d);var c=e.getActiveObject(),m=document.createElement("canvas"),g=new fabric.Canvas(m);g.setWidth(c.width),g.setHeight(c.height);var f=g.toDataURL({format:"png",enableRetinaScaling:!1}),p=r(f),h=URL.createObjectURL(p);fabric.Image.fromURL(h,function(n){g.setBackgroundImage(n,g.renderAll.bind(g),{objectType:"BG",mode:"canvas",top:0,left:0,scaleX:1,scaleY:1,selectable:!1,angle:0,originX:"left",originY:"top",lockMovementX:!0,lockMovementY:!0,lockRotation:!0,erasable:!1},{crossOrigin:"anonymous"}),g.add(c),(t=g.toJSON(["objectType","gradientFill","roundedCorders","mode","selectable","lockMovementX","lockMovementY","lockRotation","crossOrigin","layerName"])).backgroundImage.src=f,t.backgroundColor=s,t.objects=t.objects[0].objects,a.each(t.objects,function(a,e){if("printarea"==this.objectType)return t.objects.splice(a,1),!1}),a.each(t.objects,function(a,e){this.top=this.top-c.top,this.left=this.left-c.left}),t=JSON.stringify(t),g.dispose();var r=document.createElement("a"),o=new Blob([t],{type:"text/plain"});r.href=URL.createObjectURL(o),r.download=i+".json",r.click(),e.discardActiveObject(),e.requestRenderAll()})}}else n.error(agamaParams.nothingToPrint,palleonParams.error)},["objectType","gradientFill","roundedCorders","mode","selectable","lockMovementX","lockMovementY","lockRotation","crossOrigin","layerName"])}),e.find("#agama-variants").change(function(){var i=a(this).val(),n=a(this).find("option:selected").attr("data-price"),r=a(this).find("option:selected").text();t.getObjects().filter(a=>"printarea"!=a.objectType).forEach(a=>t.remove(a)),e.find("#palleon-layers > li:not(.layer-printarea)").remove(),a("#area-btn-1").attr("data-price",n),a("#area-btn-1").attr("data-val",n),a("#area-btn-1").attr("data-json",i),a("#area-btn-1").attr("data-area",r),a("#area-btn-1").trigger("click")}),l(),e.find("#agama-print-areas > .palleon-btn").each(function(){var e=a(this).attr("id");a("body").append('<script id="'+e+'-json" type="text/json"><\/script>'),a("body").append('<script id="'+e+'-design" type="text/json"><\/script>')}),e.find("#agama-print-areas .palleon-btn").on("click",function(i){e.find("#palleon-canvas-loader").css("display","flex"),e.find("#palleon-history-list li").remove(),e.find("#palleon-history").prop("disabled",!0),e.find("#palleon-undo").prop("disabled",!0),e.find("#palleon-redo").prop("disabled",!0);var l=e.find("#agama-print-areas .palleon-btn.selected").attr("id"),c=a("#"+l);if(0!==t.getObjects().filter(a=>"printarea"!=a.objectType).length){var m="",g="",f=t.getObjects().filter(a=>"printarea"==a.objectType)[0];if(f){var p=f.fill;if(!o())return n.error(agamaParams.outside,palleonParams.error),e.find("#palleon-canvas-loader").hide(),!1;if(c.attr("data-price")){var h=c.attr("data-price");c.attr("data-val",h),"left"==agamaParams.currencyPosition?c.find("span").html(agamaParams.currencySymbol+s(h.replace(".",agamaParams.decimalSeparator))):"right"==agamaParams.currencyPosition?c.find("span").html(s(h.replace(".",agamaParams.decimalSeparator))+agamaParams.currencySymbol):"left_space"==agamaParams.currencyPosition?c.find("span").html(agamaParams.currencySymbol+" "+s(h.replace(".",agamaParams.decimalSeparator))):"right_space"==agamaParams.currencyPosition&&c.find("span").html(s(h.replace(".",agamaParams.decimalSeparator))+" "+agamaParams.currencySymbol),d()}var u=t.toJSON(["objectType","gradientFill","roundedCorders","mode","selectable","lockMovementX","lockMovementY","lockRotation","crossOrigin","layerName"]);a("body").find("#"+l+"-json").html(JSON.stringify(u));var b=t.getZoom(),v=e.find("#palleon-img-width").html(),y=e.find("#palleon-img-height").html();t.setZoom(1),e.find("#palleon-img-zoom").val(100),t.setWidth(v),t.setHeight(y),t.discardActiveObject(),f.set("strokeWidth",0);var j=new fabric.ActiveSelection(t.getObjects(),{canvas:t});t.setActiveObject(j);var P=t.getActiveObject();m=P.toDataURL({format:"png",quality:"1.0",multiplier:parseFloat(agamaParams.multiplier)}),m=changeDpiDataUrl(m,agamaParams.dpi);var O=document.createElement("canvas"),w=new fabric.Canvas(O);w.setWidth(P.width),w.setHeight(P.height);var S=w.toDataURL({format:"png",enableRetinaScaling:!1}),T=r(S),k=URL.createObjectURL(T);fabric.Image.fromURL(k,function(e){w.setBackgroundImage(e,w.renderAll.bind(w),{objectType:"BG",mode:"canvas",top:0,left:0,scaleX:1,scaleY:1,selectable:!1,angle:0,originX:"left",originY:"top",lockMovementX:!0,lockMovementY:!0,lockRotation:!0,erasable:!1},{crossOrigin:"anonymous"}),w.add(P),(g=w.toJSON(["objectType","gradientFill","roundedCorders","mode","selectable","lockMovementX","lockMovementY","lockRotation","crossOrigin","layerName"])).backgroundImage.src=S,g.backgroundColor=p,g.objects=g.objects[0].objects,a.each(g.objects,function(a,e){if("printarea"==this.objectType)return g.objects.splice(a,1),!1}),a.each(g.objects,function(a,e){this.top=this.top-P.top,this.left=this.left-P.left}),a("body").find("#"+l+"-design").html(JSON.stringify(g)),w.dispose()}),t.discardActiveObject(),t.setZoom(b),e.find("#palleon-img-zoom").val(100*b),t.setWidth(v*b),t.setHeight(y*b),t.requestRenderAll(),c.attr("data-img",m)}}else a("body").find("#"+l+"-json").html(""),a("body").find("#"+l+"-design").html(""),c.attr("data-img",""),c.find("span").html(""),e.find("#agama-variants").length||c.attr("data-val","0"),d();e.find("#agama-print-areas .palleon-btn").removeClass("selected"),e.find("#agama-print-areas .palleon-btn").removeClass("selectedbefore"),c.addClass("selectedbefore"),a(this).addClass("selected");var A=a("body").find("#"+a(this).attr("id")+"-json").html(),R="";e.find(".agama-swatch.selected").length&&(R=e.find(".agama-swatch.selected").attr("data-color")),a(document).trigger("loadTemplate",[A,a(this).attr("data-json"),R])}),t.on("palleon:templateLoaded",function(a){var i=t.getObjects().filter(a=>"printarea"==a.objectType)[0];i&&e.find("#agama-printarea-color").spectrum("set",i.fill),t.getObjects().filter(a=>"clipPath"==a.objectType)[0]?e.find("#agama-bg-delete").show():e.find("#agama-bg-delete").hide(),e.find("#agama-bg-image-settings").hide(),e.find("#agama-main-loader").hide()}),e.find("#agama-print-areas .palleon-btn:first").trigger("click"),e.find("#agama-add-to-cart").on("click",function(){if(window.confirm(agamaParams.areYouSure)){if(!o())return n.error(agamaParams.outside,palleonParams.error),!1;if(e.find("#agama-main-loader").show(),e.find("#agama-product-price").hasClass("outofstock"))return e.find("#agama-main-loader").fadeOut(200),void n.error(agamaParams.outofstock,palleonParams.error);var t=e.find("#palleon-adjust .agama-product-title").html(),i=e.find("#palleon-adjust .agama-product-title").attr("data-slug"),l=e.find("#agama-add-to-cart").attr("data-product"),s=e.find("#agama-add-to-cart").attr("data-variation"),d="1";e.find("#agama-quantity").length&&""!=e.find("#agama-quantity").val()&&(d=e.find("#agama-quantity").val()),a.when(e.find("#agama-print-areas > .palleon-btn.selectedbefore").trigger("click")).then(function(){var o=!1;e.find("#agama-print-areas > .palleon-btn").each(function(){""!=a(this).attr("data-img")&&(o=!0)}),!0===o?setTimeout(function(){var o=[],c=[],m=new FormData;e.find("#agama-print-areas > .palleon-btn").each(function(){var e=a(this).attr("data-img");if(""!=e){var t=a(this).attr("id"),i=a(this).attr("data-area"),n=a("body").find("#"+t+"-design").html();n=n.replace(/\/+$/,"");var l=r(e);o.push({area:i,img:e,type:l.type}),c.push({area:i,json:n})}}),m.append("title",t),m.append("slug",i),m.append("images",JSON.stringify(o)),m.append("designs",JSON.stringify(c)),m.append("product",l),m.append("variation",s),m.append("fee",a("#agama-additional-fee").attr("data-fee")),m.append("quantity",d),m.append("userid",palleonParams.userid),m.append("action","agamaMakeOrder"),m.append("nonce",palleonParams.nonce),a.ajax({url:palleonParams.ajaxurl,type:"POST",contentType:!1,processData:!1,data:m,success:function(a){e.find("#agama-print-areas > .palleon-btn:first").trigger("click"),e.find("#agama-main-loader").fadeOut(200),n.success(agamaParams.addedToCart+'</br><a href="'+agamaParams.cartUrl+'" target="_blank">'+agamaParams.viewCart+"</a>",palleonParams.success),e.find("#palleon-cart-count").html(a)},error:function(a,t,i){e.find("#agama-print-areas > .palleon-btn:first").trigger("click"),e.find("#agama-main-loader").fadeOut(200),a.status&&400==a.status?n.error(a.responseText,palleonParams.error):n.error(palleonParams.wrong,palleonParams.error)}})},1e3):(e.find("#agama-main-loader").fadeOut(200),n.error(agamaParams.nothingToPrint,palleonParams.error))})}})}})})}(jQuery);