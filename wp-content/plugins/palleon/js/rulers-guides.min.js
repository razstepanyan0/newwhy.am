var Event=function(){"use strict";this.attach=function(e,t,n,o){var l="",s=void 0===o||o,a=null;return void 0===window.addEventListener?(l="on"+e,a=function(e,n){return t.attachEvent(e,n),n}):(l=e,a=function(e,n,o){return t.addEventListener(e,n,o),n}),a.apply(t,[l,function(e){var t=e||event,o=t.srcElement||t.target;n(t,o)},s])},this.detach=function(e,t,n,o){var l="",s=void 0===o||o;void 0===window.removeEventListener?(l="on"+e,t.detachEvent(l,n)):(l=e,t.removeEventListener(l,n,s))},this.stop=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},this.prevent=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},Dragdrop=function(e){"use strict";var t=null,n=0,o=this,l=null,s=document.documentElement,a=document.body,i=document.body.scrollWidth>document.documentElement.clientWidth?document.body.scrollWidth:document.documentElement.clientWidth,c=Math.max(a.scrollHeight,a.offsetHeight,s.clientHeight,s.scrollHeight,s.offsetHeight),d=function(e){var o=e.clientX-t.posX,l=e.clientY-t.posY,s=o-o%t.snap+"px",a=l-l%t.snap+"px";if(1===n){switch(t.mode){case 0:t.style.top=a,t.style.left=s;break;case 1:t.style.left=s;break;case 2:t.style.top=a}2!==t.mode&&(o<=t.minX&&(t.style.left=t.minX+"px"),t.offsetLeft+t.offsetWidth>=t.maxX&&(t.style.left=t.maxX-t.offsetWidth+"px")),1!==t.mode&&(l<=t.minY&&(t.style.top=t.minY+"px"),t.offsetTop+t.offsetHeight>=t.maxY&&(t.style.top=t.maxY-t.offsetHeight+"px")),t.onMove(t)}},r=function(s,a){-1!==a.className.indexOf("draggable")&&(e.prevent(s),l=e.attach("mousemove",document,d,!0),n=1,(t=a).posX=s.clientX-t.offsetLeft,t.posY=s.clientY-t.offsetTop,void 0===t.mode&&o.set(t),t.onStart(t),t.setPointerCapture&&t.setPointerCapture("rulerPointerCapture"))};e.attach("mousedown",document,r,!1),e.attach("mouseup",document,function(){1===n&&(n=0,t.onStop(t),e.detach("mousemove",document,l),t.releasePointerCapture&&t.releasePointerCapture("rulerPointerCapture"))},!1),this.start=r,this.set=function(e,n){var o=n||{};(t="string"==typeof e?document.getElementById(e):e).mode=o.mode||0,t.minX=o.minX||0,t.maxX=o.maxX||i,t.minY=o.minY||0,t.maxY=o.maxY||c,t.snap=o.snap||1,t.onStart=o.onstart||function(){},t.onMove=o.onmove||function(){},t.onStop=o.onstop||function(){},t.style.left=t.offsetLeft+"px",t.style.top=t.offsetTop+"px",t.unselectable="on"}},RulersGuides=function(e,t,n){"use strict";var o=document.documentElement,l=document.body,s=null,a=null,i=null,c=null,d=2,r={},u=0,m="",p=0,f=1,h=0,y=0,g=0,v=0,x=null,b=null,N=[],E=null,w=function(e,t){var n=document.createElement("div"),o=0,l=document.createElement("span"),s=null,a=null,i=document.createDocumentFragment(),c=Math.floor(t/2);for(n.id="ruler-"+e,n.className="ruler "+e+" unselectable";o<c;o+=1)l=l.cloneNode(!1),o%25==0?(l.className="milestone",o>0&&((s=l.cloneNode(!1)).className="label",o<50?s.className+=" l10":o>=50&&o<500?s.className+=" l100":o>=500&&(s.className+=" l1000"),a=document.createTextNode(2*o),s.appendChild(a),l.appendChild(s)),l.className="milestone"):o%5==0?l.className="major":(l.className="",l.removeAttribute("class")),i.appendChild(l);return n.appendChild(i),n},C=function(){if(void 0!==n)var e=Math.max(n.scrollWidth,n.offsetWidth,n.clientWidth,n.scrollWidth,n.offsetWidth)+615,t=Math.max(n.scrollHeight,n.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight);else e=Math.max(l.scrollWidth,l.offsetWidth,o.clientWidth,o.scrollWidth,o.offsetWidth),t=Math.max(l.scrollHeight,l.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight);return[e,t]},P=function(){if(void 0!==n)var e=n.scrollTop,t=n.scrollLeft;else e=Math.max(o.scrollTop,l.scrollTop),t=Math.max(o.scrollLeft,l.scrollLeft);return[e,t]},T=function(e,t,n){var o=P();if(void 0!==n)var l=n.clientX,s=n.clientY;1===p&&1===f&&("guide h draggable"===e.className&&e.offsetTop<v-g+o[0]||"guide v draggable"===e.className&&e.offsetLeft<y-h+o[1]||s>g&&s<v||l>h&&l<y)&&-1===e.className.indexOf("guide")&&(e=r["guide-"+(u-1)])},H=function(){p=1-p;var e=document.getElementById("palleon-img-zoom-in"),t=document.getElementById("palleon-img-zoom-out");1===p?(t.click(),i.style.display="block",a.style.display="block",s.style.display="block",document.getElementById("palleon-ruler-icon").classList.remove("closed"),function(){var e;for(e in r)r.hasOwnProperty(e)&&T(r[e])}()):(e.click(),document.getElementById("palleon-ruler-icon").classList.add("closed"),i.style.display="none",a.style.display="none")},L=function(){var e;if(u>0){for(e in r)r.hasOwnProperty(e)&&(s.removeChild(r[e]),delete r[e],u-=1);b.style.display="none"}},W=function(){for(var e=[],t=[],n=[],o=0,l=N.length,s=function(e){for(var t=0,n=0,o=e.offsetWidth,l=e.offsetHeight;e;)n+=e.offsetLeft-e.scrollLeft+e.clientLeft,t+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return[n,t,n+o,t+l]},a=function(e){for(var t={},n=[],o=0,l=e.length;o<l;o+=1)!1===t.hasOwnProperty(e[o])&&(n.push(e[o]),t[e[o]]=1);return n};o<l;o+=1)n=s(N[o]),e.push(n[0]),e.push(n[2]),t.push(n[1]),t.push(n[3]);return[e=a(e).sort(function(e,t){return e-t}),t=a(t).sort(function(e,t){return e-t})]},k=function(){var t=null,n=0,o={},l=[{text:palleonParams.hideRulers,alias:"rulers"},{text:palleonParams.hideGuides,alias:"guides"},{text:palleonParams.clearAllGuides,alias:"clear"}],a=0;this.render=function(){(x=document.createElement("div")).className="menu-btn",x.innerHTML='<span class="material-icons">square_foot</span>',(t=document.createElement("ul")).className="rg-menu";var i=document.createDocumentFragment(),d=document.createElement("li"),m=document.createElement("a"),h=document.createElement("span"),y=document.createTextNode("");for(m.href="javascript:",h.className="desc";a<l.length;a+=1)d=d.cloneNode(!1),m=m.cloneNode(!1),h=h.cloneNode(!1),(y=y.cloneNode(!1)).nodeValue=l[a].text,h.appendChild(y),m.appendChild(h),d.appendChild(m),i.appendChild(d),o[l[a].alias]={obj:m,txt:y};e.attach("mousedown",o.rulers.obj,function(){H(),c.close()}),e.attach("mousedown",o.guides.obj,function(){!function(){var e;for(e in f=1-f,r)r.hasOwnProperty(e)&&(r[e].style.display=1===f?"block":"none");1===f&&(s.style.display="block")}(),c.close()}),e.attach("mousedown",o.clear.obj,function(){o.guides.txt.nodeValue=palleonParams.hideGuides,f=1,L(),c.close()}),t.appendChild(i),document.getElementById("palleon-ruler-icon").appendChild(x),document.getElementById("palleon-ruler-icon").appendChild(t),e.attach("mousedown",x,function(){o.rulers.txt.nodeValue=1===p?palleonParams.hideRulers:palleonParams.showRulers,u>0?(o.guides.obj.className="",o.clear.obj.className="",o.guides.txt.nodeValue=1===f?palleonParams.hideGuides:palleonParams.showGuides):(o.guides.obj.className="disabled",o.clear.obj.className="disabled"),t.style.display=0===n?"inline-block":"none",n=1-n})},this.render(),this.close=function(){null!==t&&(t.style.display="none",n=0)}};!function(){for(var e=document.createElement("style"),t=C(),o=document.getElementsByTagName("*"),d=o.length,r=0;r<d;r+=1)N.push(o[r]);e.setAttribute("type","text/css"),e.styleSheet?e.styleSheet.cssText="":e.appendChild(document.createTextNode("")),l.appendChild(e),setTimeout(function(){a=new w("h",3e3),i=new w("v",7e3),s=document.createElement("div"),b=s.cloneNode(!1),s.className="rg-overlay",b.className="info-block-wrapper",s.style.width=t[0]+"px",s.style.height=t[1]+"px",s.appendChild(a),s.appendChild(i),s.appendChild(b),n.appendChild(s),W(),c=new k},10)}(),this.status=1,this.disable=function(){null!==i&&(L(),i.style.display="none",a.style.display="none",s.style.display="none",x.style.display="none"),p=0,this.status=0},this.enable=function(){null!==i&&(i.style.display="block",a.style.display="block",s.style.display="block",x.style.display="block"),p=1,this.status=1},e.attach("mousedown",document,function(o,l){if(document.querySelector("#ruler-h").contains(o.target)||document.querySelector("#ruler-v").contains(o.target)){var f=o.clientX,x=o.clientY,b=null,N=null,E=null,w=P(),C=0;-1===l.className.indexOf("menu-btn")&&c.close(),0===h&&(h=n.offsetLeft,y=i.offsetWidth+h,g=n.offsetTop,v=a.offsetHeight+g),(f>h&&f<y||x>g&&x<v)&&1===p&&(N=(b=document.createElement("div")).cloneNode(!1),E=document.createTextNode(""),m="guide-"+u,N.className="info",N.appendChild(E),b.appendChild(N),x>g&&x<v?(b.className="guide h draggable",b.style.top=o.clientY-n.offsetTop+"px",N.style.left=f+w[1]+10+"px",b.type="h",C=0,d=2):f>h&&f<y&&(b.className="guide v draggable",b.style.left=f-n.offsetLeft+"px",N.style.top=x+w[0]-35+"px",b.type="v",C=0,d=1),b.id=m,b.info=N,b.text=E,b.x=0,b.y=0,r[m]=b,s.appendChild(b),t.set(b,{mode:d,onstart:function(t){var n=1===t.mode?parseInt(t.style.left,10)+2:parseInt(t.style.top,10)+2;t.text.nodeValue=n-41,void 0!==t.over&&(e.detach("mouseover",t,t.over),e.detach("mouseout",t,t.out))},onmove:function(e){var t,n=0;n=1===e.mode?e.style.left:e.style.top,t=n=parseInt(n,10),1===e.mode?(e.style.left=n-2+"px",e.x=n):(e.style.top=n-2+"px",e.y=n),e.text.nodeValue=t-41},onstop:function(t){t.over=e.attach("mouseover",t,function(e,n){"guide v draggable"===n.className?t.info.style.top=e.clientY+w[0]-35+"px":"guide h draggable"===n.className&&(t.info.style.left=e.clientX+w[1]+10+"px"),t.info.style.display="block"}),t.out=e.attach("mouseout",t,function(){t.info.style.display="none"})},snap:C}),t.start(o,b),u+=1)}}),e.attach("mouseup",document,function(e,t){T(t,t.id,e)}),e.attach("resize",window,function(){var e=C();s.style.width=e[0]+"px",s.style.height=e[1]+"px",null!==E&&window.clearTimeout(E)})};if(document.body.clientWidth>=1200)var evt=new Event("palleon-ruler"),dragdrop=new Dragdrop(evt),rg=new RulersGuides(evt,dragdrop,document.getElementById("palleon-ruler"));